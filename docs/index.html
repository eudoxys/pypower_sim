<!doctype html>
    <html>
    <head>
        <title>pypower_sim</title>
        <meta name="expires" content="86400" />
        <link rel="stylesheet" href="qdox.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    </head>
    <body>

    <!-- Sidebar -->
    <div class="w3-sidebar w3-light-grey w3-bar-block" style="width:180px">
      <center>
        <img src="https://avatars.githubusercontent.com/u/21315775?v=4" height="128px" width="128px"/>
        <br/><a href="https://github.com/eudoxys">Eudoxys Sciences LLC</a>
        <br/><a href="https://github.com/eudoxys"></a>
      </center>
      <title class="w3-bar-item">pypower_sim</title>
      <a href="#main" class="w3-bar-item w3-button">Command Line</a>
      <a href="#python" class="w3-bar-item w3-button">Python Library</a>
      <a href="#package" class="w3-bar-item w3-button">Package Metadata</a>
    </div>

    <!-- Page Content -->
    <div style="margin-left:220px">

    <h1 id="main" class="w3-container">Command Line</h1>

    <p/>


<h2 class="w3-container">pypower_sim</h2>
<p/>
PyPOWER timeseries simulation
<p/>
Syntax: pypower_sim [OPTIONS...] CASENAME [ARGUMENTS ...]
<p/>


<h4 class="w3-container">Options</h4>
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>


<h1 id="python" class="w3-container">Python Library</h1>


<h2 class="w3-container">Class pypower_sim()</h2>
<p/>
KML generator class


<h3 class="w3-container"><code><b>pypower_sim.KML</b>(<b>kmlfile</b>:<i>str</i>, <b>name</b>:<i>str</i>)</code></h3>
<p/>
Start KML file


<h3 class="w3-container"><code><b>KML.add_line</b>(<b>name</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Add a line entity
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: line name
<p/>
from_position: line starting position
<p/>


<h4 class="w3-container">to_position: line ending position</h4>
<p/>
style: line style
<p/>
data: line data
<p/>


<h3 class="w3-container"><code><b>KML.add_linestyle</b>(<b>name</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Add a line style
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: linestyle name
<p/>
color: line color
<p/>
width: line width
<p/>
opacity: line opacity
<p/>


<h3 class="w3-container"><code><b>KML.add_marker</b>(<b>name</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Add a marker entity
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: marker name
<p/>
position: marker position
<p/>
style: marker style
<p/>
data: marker data
<p/>


<h3 class="w3-container"><code><b>KML.add_markerstyle</b>(<b>name</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Add a marker style
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: markerstyle name
<p/>
icon: icon URL
<p/>
scale: icon size
<p/>


<h3 class="w3-container"><code><b>KML.close</b>() &rightarrow; <i>None</i></code></h3>
<p/>
Close KML file


<h2 class="w3-container">Class pypower_sim()</h2>
<p/>
PyPOWER model data I/O manager


<h3 class="w3-container"><code><b>pypower_sim.PPData</b>()</code></h3>
<p/>
Setup data I/O manager
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>


<h4 class="w3-container">model</h4>


<h3 class="w3-container"><code><b>PPData.set_input</b>(<b>name</b>:<i>str</i>, <b>column</b>:<i>str</i>, <b>file</b>:<i>str</i>, <b>scale</b>:<i>float</i>, <b>offset</b>:<i>float</i>, <b>mapping</b>:<i>dict</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Set a timeseries input data feed
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: data set name (e.g., bus, branch)
<p/>
column: data column name (e.g., "PD")
<p/>
file: file name from which data is input
<p/>
scale: scaling factor to apply to input data
<p/>
offset: offset to apply to the scaled data
<p/>
mapping: maps column names to data rows with weights
<p/>


<h3 class="w3-container"><code><b>PPData.set_output</b>(<b>name</b>:<i>str</i>, <b>column</b>:<i>str</i>, <b>file</b>:<i>str</i>, <b>scale</b>:<i>float</i>, <b>offset</b>:<i>float</i>, <b>mapping</b>:<i>dict</i>, <b>formatting</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Set a timeseries output data feed
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: data set name (e.g., bus, branch)
<p/>
column: data column name (e.g., "PD)
<p/>
file: file name to which data is output
<p/>
scale: scaling factor to apply to output data
<p/>
offset: offset to apply to scaled data
<p/>
mapping: maps column names to data rows with weights
<p/>
formatting: formatting of output
<p/>


<h3 class="w3-container"><code><b>PPData.set_recorder</b>(<b>file</b>:<i>str</i>, <b>name</b>:<i>str</i>, <b>target</b>:<i>list</i>, <b>scale</b>:<i>float</i>, <b>offset</b>:<i>float</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Set a recorder
<p/>
file: file name to which data is output
<p/>
name: output column name
<p/>
target: case keys to value to record (e.g., ["cost"])
<p/>
scale: scaling factor to apply to output data
<p/>
offset: offset to apply to scaled data
<p/>
format: formatting of output
<p/>


<h2 class="w3-container">Class pypower_sim()</h2>
<p/>
Abstract class for generator data


<h3 class="w3-container"><code><b>pypower_sim.PPGen</b>(<b>source</b>:<i>str</i>, <b>cache</b>:<i>str</i>)</code></h3>
<p/>
Abstract class constructor for generators
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
source: source of data
<p/>
cache: path name to cache
<p/>


<h3 class="w3-container"><code><b>PPGen.to_gen</b>(<b>case</b>:<i>dict</i>, <b>ignore_bustype</b>:<i>bool</i>, <b>exclude</b>:<i>dict</i>, list[str] | None, <b>converters</b>:<i>dict</i>, str | None) &rightarrow; <i>DataFrame</i></code></h3>
<p/>
Convert generation fleet data to PyPOWER gen data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
case: pypower case data tables
<p/>
ignore_bustype: flag to disable limiting nearest bus search based on bustype
<p/>
exclude: table of exclusions
<p/>
groupby: data groupings in addition to bus id
<p/>
converters: value converters to apply to data columns before groups
<p/>
index_csv: CSV file to which gen info is written, same order as gen
rows, index refers back to data rows
<p/>


<h3 class="w3-container"><code><b>PPGen.to_gencost</b>(<b>case</b>:<i>dict</i>, pandas.core.frame.DataFrame | None) &rightarrow; <i>DataFrame</i></code></h3>
<p/>
Convert generation fleet data to PyPOWER gencost data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
case: pypower case data tables
<p/>
<p/>


<h3 class="w3-container"><code><b>PPGen.to_kml</b>(<b>filename</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Write KML file
<h3 class="w3-container">Static Variables</h3>
<p/><code>valid_columns = {'state': (<class 'str'>, ''), 'county': (<class 'str'>, ''), 'plant_id': (<class 'int'>, None), 'generator_id': (<class 'str'>, ''), 'unit_code': (<class 'str'>, ''), 'plant_name': (<class 'str'>, ''), 'operating_capacity': (<class 'float'>, nan), 'summer_capacity': (<class 'float'>, nan), 'winter_capacity': (<class 'float'>, nan), 'technology': (<class 'str'>, ''), 'fuel': (<class 'str'>, ''), 'gen': (<class 'str'>, ''), 'latitude': (<class 'float'>, nan), 'longitude': (<class 'float'>, nan), 'geohash': (<class 'str'>, '')}</code>
<p/><code>valid_mappings = {'fuel': {'GEO', 'COAL', 'WASTE', 'OTHER', 'WIND', 'NUCLEAR', 'WATER', 'GAS', 'OIL', 'SUN'}, 'gen': {'NA', 'CC', 'IC', 'PV', 'WT', 'ST', 'ES', 'HT', 'CT'}}</code>


<h2 class="w3-container">Class pypower_sim()</h2>
<p/>
PyPower Model Access


<h3 class="w3-container"><code><b>pypower_sim.PPModel</b>(<b>name</b>:<i>str</i>, <b>version</b>:<i>int</i>, <b>mvabase</b>:<i>float</i>, <b>case</b>:<i>Union</i>)</code></h3>
<p/>
Create PyPower case data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: name of the case
<p/>
version: case version number
<p/>
mvabase: MVA base value
<p/>
case: case data
<p/>


<h3 class="w3-container"><code><b>PPModel.branch</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create branch data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: merged branch and transformer data (see pypower.idx_brch for
<pre>details)
</pre>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: bus data
<p/>


<h3 class="w3-container"><code><b>PPModel.bus</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create bus data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: merged bus, load, and shunt data (see pypower.idx_bus for
<pre>details)
</pre>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: bus data
<p/>


<h3 class="w3-container"><code><b>PPModel.dcline</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create dcline data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: dcline data (see pypower.idx_dcline for details)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: dcline data
<p/>


<h3 class="w3-container"><code><b>PPModel.dclinecost</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create dclinecost data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: dclinecost data (see pypower.idx_cost for details)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: cost data
<p/>


<h3 class="w3-container"><code><b>PPModel.gen</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create gen data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: generation data (see pypower.idx_gen for details)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: gen data
<p/>


<h3 class="w3-container"><code><b>PPModel.gencost</b>() &rightarrow; <i>array</i></code></h3>
<p/>
Create gencost data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
kwargs: generation data (see pypower.idx_gen for details)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
np.array: cost data
<p/>


<h3 class="w3-container"><code><b>PPModel.get_bus</b>(int | None, str | None) &rightarrow; <i>DataFrame</i></code></h3>
<p/>
Get data for all load busses
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
bustype: bus type of get (i.e., idx_bus.PQ, idx_bus.PV, idx_bus.REF)
<p/>
index: index to use (merge with GIS data if index in GIS columns)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
pandas.DataFrame: bus data
<p/>


<h3 class="w3-container"><code><b>PPModel.get_data</b>() &rightarrow; <i>DataFrame</i></code></h3>
<p/>
Get data table with data types
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
name: name of case data to return (e.g., "bus","branch","gis", etc.)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
pandas.DataFrame: case data requested with data types (see types_idx)
<p/>


<h3 class="w3-container"><code><b>PPModel.get_gis</b>() &rightarrow; <i>DataFrame</i></code></h3>
<p/>
Get indexed GIS data
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
pandas.DataFrame: case GIS data (no index, sorted by row number)
<p/>


<h3 class="w3-container"><code><b>PPModel.get_graph</b>(<b>level</b>:<i>str</i>, <b>nodes</b>:<i>str</i>) &rightarrow; <i>tuple</i></code></h3>
<p/>
Get network graphs
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
level: "BUS","NODE","ZONE","AREA"
<p/>
nodes: return node type (None, "nearest", "centroid")
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
links: list of link tuples indexes into bus data in order of branch
data
<p/>


<h3 class="w3-container"><code><b>PPModel.get_header</b>(<b>name</b>:<i>str</i>, <b>ignore</b>:<i>list</i>) &rightarrow; <i>list</i></code></h3>
<p/>
Convert idx data to a header list
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
idx: module containing index values
<p/>
ignore: list of index values to ignore
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
list[str]: ordered list of data array column header names
<p/>


<h3 class="w3-container"><code><b>PPModel.get_info</b>() &rightarrow; <i>dict</i></code></h3>
<p/>
Get model information
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
dict: table of model information
<p/>


<h3 class="w3-container"><code><b>PPModel.get_nodes</b>(pandas.core.frame.DataFrame | None) &rightarrow; <i>dict</i></code></h3>
<p/>
Get a dictionary of nodes and their busses
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
data: dataframe from use ("gis" if None)
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
dict: table of nodes and bus ids
<p/>


<h3 class="w3-container"><code><b>PPModel.print</b>() &rightarrow; <i>None</i></code></h3>
<p/>
Print case data


<h3 class="w3-container"><code><b>PPModel.save_case</b>(<b>file</b>:<i>StringIO</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Save the case data to a file
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
file: file handle to which case data is saved
<p/>
precision: float rounding precision
<p/>


<h3 class="w3-container"><code><b>PPModel.save_kml</b>(<b>filename</b>:<i>str</i>, <b>use_geocode</b>:<i>bool</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Generate KML output
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
filename: KML filename of output
<p/>
use_geocode: marker names are geocode instead of bus id
<p/>


<h3 class="w3-container"><code><b>PPModel.set_case</b>(<b>case</b>:<i>dict</i>) &rightarrow; <i>Self</i></code></h3>
<p/>
Set the case data
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
case: case data to use
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
self: the model with the newly set case data
<p/>
<h3 class="w3-container">Static Variables</h3>
<p/><code>branch_optional = ['PF', 'PT', 'QF', 'QT', 'MU_SF', 'MU_ST', 'MU_ANGMIN', 'MU_ANGMAX']</code>
<p/><code>bus_optional = ['LAM_P', 'LAM_Q', 'MU_VMIN', 'MU_VMAX']</code>
<p/><code>dcline_optional = ['MU_PMIN', 'MU_PMAX', 'MU_QMINF', 'MU_QMAXF', 'MU_QMINT', 'MU_QMAXT']</code>
<p/><code>gen_optional = ['MU_PMAX', 'MU_PMIN', 'MU_QMAX', 'MU_QMIN']</code>
<p/><code>standard_idx = {'bus': ['PQ', 'PV', 'REF', 'NONE'], 'branch': [], 'gen': [], 'gencost': ['PW_LINEAR', 'POLYNOMIAL'], 'dcline': [], 'dclinecost': ['PW_LINEAR', 'POLYNOMIAL'], 'gis': []}</code>
<p/><code>types_idx = {'bus': {'BUS_I': <class 'int'>, 'BUS_TYPE': <class 'int'>, 'BUS_AREA': <class 'int'>, 'ZONE': <class 'int'>}, 'branch': {'F_BUS': <class 'int'>, 'T_BUS': <class 'int'>, 'BR_STATUS': <class 'int'>}, 'gen': {'GEN_BUS': <class 'int'>, 'GEN_STATUS': <class 'int'>}, 'gencost': {'MODEL': <class 'int'>, 'NCOST': <class 'int'>}, 'dcline': {'F_BUS': <class 'int'>, 'T_BUS': <class 'int'>, 'BR_STATUS': <class 'int'>}, 'dclinecost': {'MODEL': <class 'int'>, 'NCOST': <class 'int'>}, 'gis': {'BUS_I': <class 'int'>, 'GEOHASH': <class 'str'>, 'NAME': <class 'str'>}}</code>


<h2 class="w3-container">Class pypower_sim()</h2>
<p/>
PyPOWER solver implementation


<h3 class="w3-container"><code><b>pypower_sim.PPSolver</b>()</code></h3>
<p/>
PyPOWER model solver


<h3 class="w3-container"><code><b>PPSolver.run_timeseries</b>(<b>progress</b>:<i>Callable</i>, <b>call_on_fail</b>:<i>Callable</i>, <b>stop_on_fail</b>:<i>bool</i>, <b>stop_test</b>:<i>Callable</i>, <b>use_acopf</b>:<i>bool</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Run a timeseries simulation
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
<i>args, </i>*kwargs: See pandas.date_range()
<p/>
progress: set a progress callback function
<p/>
call_on_fail: set a call-on-fail function
<p/>
stop_on_fail: enable stop-on-fail condition
<p/>
stop_test: set a stop test call back function
<p/>
use_acopf: enable use of AC OPF instead of DC OPF
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
None: No errors to report
<p/>
str: Error message (when stop_on_fail is True)
<p/>
list[str]: Error messages (when stop_on_fail is False)
<p/>


<h3 class="w3-container"><code><b>PPSolver.solve_opf</b>(<b>use_acopf</b>:<i>bool</i>, <b>update</b>:<i>str</i>, <b>with_result</b>:<i>bool</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Solve the optimal powerflow problem
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
use_acopf: enable AC OPF solution
<p/>
update: when update of model case data ('always','success','failure')
<p/>
with_result: include result in return value
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
bool: True on success, False on failure
<p/>
dict: result (if with_result is True)
<p/>


<h3 class="w3-container"><code><b>PPSolver.solve_pf</b>(<b>update</b>:<i>str</i>, <b>with_result</b>:<i>bool</i>) &rightarrow; <i>bool</i></code></h3>
<p/>
Solve the powerflow problem
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
update: when to update of model case data ('always','success','failure')
<p/>
with_result: include result in return value
<p/>


<h4 class="w3-container">Returns</h4>
<p/>
bool: True on success, False on failure
<p/>
dict: result (if with_result is True)
<p/>


<h3 class="w3-container"><code><b>PPSolver.update_inputs</b>(<b>t</b>:<i>datetime</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Synchronize inputs with the current date/time
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
t: the current date/time
<p/>


<h3 class="w3-container"><code><b>PPSolver.update_outputs</b>(<b>t</b>:<i>datetime</i>, <b>ts_format</b>:<i>str</i>) &rightarrow; <i>None</i></code></h3>
<p/>
Synchronize outputs to the current date/time
<p/>


<h4 class="w3-container">Arguments</h4>
<p/>
t: the current date/time
<p/>
ts_format: timestamp format
<p/>


<h2 id="python" class="w3-container">Module Functions</h2>


<h3 class="w3-container"><code><b>main</b>() &rightarrow; <i>None</i></code></h3>
<p/>
Main command line processor


<h1 id="package" class="w3-container">Package Metadata</h1>
<p/>
<table class="w3-container">
<tr><th><nobr>Name</nobr></th><td>:</td><td>pypower_sim</td></tr>
<tr><th><nobr>Version</nobr></th><td>:</td><td>0.0.0</td></tr>
<tr><th><nobr>Authors</nobr></th><td>:</td><td>David P. Chassin</td></tr>
<tr><th><nobr>Maintainers</nobr></th><td>:</td><td>David P. Chassin <dpchassin@gmail.com></td></tr>
<tr><th><nobr>Description</nobr></th><td>:</td><td>PyPOWER time-series simulator</td></tr>
<tr><th><nobr>Requires-Python</nobr></th><td>:</td><td>>=3.10</td></tr>
<tr><th><nobr>Keywords</nobr></th><td>:</td><td>eudoxys<br/>pypower<br/>simulation<br/>quasi-steady<br/>timeseries</td></tr>
<tr><th><nobr>License</nobr></th><td>:</td><td>MIT</td></tr>
<tr><th><nobr>Classifiers</nobr></th><td>:</td><td>Programming Language :: Python :: 3</td></tr>
<tr><th><nobr>Dependencies</nobr></th><td>:</td><td>None</td></tr>
<tr><th><nobr>Scripts</nobr></th><td>:</td><td><code>pypower_sim</code> &rightarrow; <code>main()</code></td></tr>
<tr><th><nobr>Urls</nobr></th><td>:</td><td>Homepage = https://github.com/eudoxys/pypower_sim<br/>Documentation = https://www.eudoxys.com/pypower_sim<br/>Repository = https://github.com/eudoxys/pypower_sim.git<br/>Issues = https://github.com/eudoxys/pypower_sim/issues</td></tr>
</table>


<hr/><p/><cite>Copyright &copy; 2025 Eudoxys Sciences LLC</body>
            </html>
